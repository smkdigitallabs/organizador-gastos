<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Receitas - Organizador de Gastos</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Overlay de Carregamento de Autentica√ß√£o -->
    <div id="auth-loading-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #f0f2f5; z-index: 9999; display: flex; justify-content: center; align-items: center; flex-direction: column;">
        <div class="spinner" style="width: 50px; height: 50px; border: 5px solid #e0e0e0; border-top-color: #3498db; border-radius: 50%; animation: spin 1s linear infinite;"></div>
        <p style="margin-top: 20px; font-family: 'Segoe UI', sans-serif; color: #333;">Verificando acesso...</p>
        <style>
            @keyframes spin {
                to { transform: rotate(360deg); }
            }
        </style>
    </div>
    <nav class="side-nav">
        <a href="index.html" title="P√°gina Inicial"><i class="fas fa-home"></i></a>
        <a href="settings.html" title="Configura√ß√µes"><i class="fas fa-cog"></i></a>
        <a href="details.html" title="Detalhes"><i class="fas fa-list"></i></a>
        <a href="expenses.html" title="Despesas"><i class="fas fa-dollar-sign expense-icon"></i></a>
        <a href="wallet.html" title="Carteira"><i class="fas fa-folder"></i></a>
        <a href="income.html" class="active" title="Receitas"><i class="fas fa-dollar-sign income-icon"></i></a>
        <a href="#" id="export-data-btn" title="Exportar Dados"><i class="fas fa-download"></i></a>
        <a href="#" id="import-data-btn" title="Importar Dados"><i class="fas fa-upload"></i></a>
        <a href="#" id="clear-data-btn" title="Apagar Todos os Dados" class="trash-button"><i class="fas fa-trash-alt"></i></a>
        <a href="#" id="dark-mode-toggle" class="dark-mode-toggle" title="Alternar Modo Escuro"><i class="fas fa-moon"></i></a>
        <input type="file" id="importFile" accept=".json" style="display: none;">
    
        <!-- Adicionar se√ß√£o de hist√≥rico de auto-saves -->
        <div class="auto-save-manager">
            <a href="#" id="auto-save-history-btn" title="Hist√≥rico de Auto-Saves"><i class="fas fa-history"></i></a>
            <div id="auto-save-panel" class="auto-save-panel" style="display: none;">
                <h3>Hist√≥rico de Auto-Saves</h3>
                <div id="auto-save-versions"></div>
                <button id="load-versions-btn" class="btn-small">Carregar Vers√µes</button>
                <button id="clear-history-btn" class="btn-small btn-danger">Limpar Hist√≥rico</button>
            </div>
        </div>
        
        <!-- Vers√£o da Aplica√ß√£o -->
        <div class="app-version" style="position: absolute; bottom: 10px; width: 100%; text-align: center; color: #666; font-size: 0.8em;">
            <span id="app-version-display">v1.0.0</span>
        </div>
    </nav>
    <div class="main-content">
        <div class="auth-header" style="display: flex; justify-content: flex-end; padding: 10px;">
            <div id="auth-container">
                <button id="sign-in-btn" class="btn-primary">Entrar / Criar Conta</button>
                <div id="user-profile" style="display: none; align-items: center; gap: 10px;">
                    <span id="user-email"></span>
                    <button id="sign-out-btn" class="btn-small btn-danger">Sair</button>
                    <div id="sync-status" title="Status da Sincroniza√ß√£o" style="width: 10px; height: 10px; border-radius: 50%; background-color: gray;"></div>
                </div>
            </div>
        </div>
        <div class="expense-form">
            <div class="section-header-container">
                <h2>Adicionar Receita</h2>
                <button class="help-btn" onclick="import('./tutorialSystem.js').then(m => m.tutorialSystem.startTour('income-form'))" title="D√∫vidas sobre o cadastro de receita?">
                    <i class="fas fa-question"></i> D√∫vidas
                </button>
            </div>
            <form id="incomeForm">
                <div class="form-group">
                    <label for="description">Descri√ß√£o:</label>
                    <input type="text" id="description" required>
                </div>
                <div class="form-group">
                    <label for="amount">Valor (R$):</label>
                    <input type="number" id="amount" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="category">Categoria:</label>
                    <div class="category-input-wrapper">
                        <div class="category-dropdown" id="category-dropdown">
                            <div class="category-selected" id="category-selected">
                                <span>Selecione uma categoria</span>
                                <span class="dropdown-arrow">‚ñº</span>
                            </div>
                            <div class="category-options" id="category-options">
                                <!-- Op√ß√µes ser√£o inseridas dinamicamente -->
                            </div>
                        </div>
                        <input type="hidden" id="category" name="category" value="">
                        <div class="category-tooltip" id="category-tooltip"></div>
                    </div>
                </div>
                <div class="form-group date-inline">
                    <label for="date">Data:</label>
                    <div class="date-field-wrapper">
                        <input type="date" id="date" required onclick="this.showPicker()">
                    </div>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="isFixed">
                        Receita Fixa
                    </label>
                </div>
                <button type="submit" class="btn-submit">Adicionar Receita</button>
                <!-- <button type="button" class="btn-test" onclick="generateRandomIncome()">üé≤ Gerar Receita Teste</button> REMOVIDO -->
            </form>
        </div>
    </div>
    <!-- Adicionar antes do fechamento do body -->
    <script type="module" src="income.js"></script>
</body>
</html>
